# registry-api

![Version: 6.0.0-alpha.2](https://img.shields.io/badge/Version-6.0.0--alpha.2-informational?style=flat-square)

A Helm chart for Kubernetes

## Requirements

Kubernetes: `>= 1.14.0-0`

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| appConfig | object | `{"akka":{"http":{"client":{"idle-timeout":"120s"}}},"authApi":{"baseUrl":"http://authorization-api"},"authorization":{"skipOpaQuery":false},"db":{"default":{"url":"jdbc:postgresql://registry-db/postgres"}},"http":{"port":6101},"printFullConfig":false,"scalikejdbc":{"global":{"loggingSQLAndTime":{"enabled":false}}},"validateJsonSchema":true,"webhooks":{"requestStreamTimeout":"120s"}}` | application config. Allow to configure any application config fields. For all available configuration fields and their default values, please refer to [application.conf](https://github.com/magda-io/magda/blob/main/magda-registry-api/src/main/resources/application.conf) This config field is available since v2.2.5 Previous versions supported config fields: `.Values.validateJsonSchema`, `.Values.db.poolInitialSize`, `.Values.db.poolMaxSize` and  `.Values.db.poolConnectionTimeoutMillis` are still supported for backward compatible reason (although deprecated). When exist, values from those obsolete config fields will override relevant fields in `.Values.appConfig`. Obsolete config fields: `.Values.logLevel`, `.Values.skipAuthorization` and `.Values.printSQlInConsole` are not supported anymore. Please config using alternative fields via `.Values.appConfig` instead. |
| appConfig.authorization.skipOpaQuery | bool | `false` | Skip asking authorization decisions from policy engine. `UnconditionalTrueDecision` will be always returned for this case Useful when running locally - DO NOT TURN ON IN PRODUCTION  |
| appConfig.printFullConfig | bool | `false` | whether print out full config data at application starting up for debug purpose only |
| appConfig.scalikejdbc.global.loggingSQLAndTime.enabled | bool | `false` | Whether print all SQL in console. For DEBUG only |
| appConfig.validateJsonSchema | bool | `true` | Whether registry api should validate incoming JSON data |
| appConfig.webhooks.requestStreamTimeout | string | `"120s"` | WebHook event notification request stream processing timeout you might want to increase this value to allow longer processing time for sync webhooks you will also want to adjust `akka.http.client.idle-timeout` to match this value |
| aspectDefinitionMigrator.backoffLimit | int | `6` |  |
| aspectDefinitionMigrator.enabled | bool | `true` |  |
| aspectDefinitionMigrator.image.name | string | `"magda-migrator-registry-aspects"` |  |
| autoscaler.enabled | bool | `false` |  |
| autoscaler.maxReplicas | int | `3` |  |
| autoscaler.minReplicas | int | `1` |  |
| autoscaler.targetCPUUtilizationPercentage | int | `80` |  |
| defaultImage.pullPolicy | string | `"IfNotPresent"` |  |
| defaultImage.pullSecrets | bool | `false` |  |
| defaultImage.repository | string | `"ghcr.io/magda-io"` |  |
| deployments.full | object | `{"idleTimeout":"60s","replicas":1,"requestTimeout":"60s"}` | deployment config for full registry instance. You can also specify different `resources` config under this key. |
| deployments.full.idleTimeout | string | `"60s"` | Default idle timeout for full instance. Make sure `idleTimeout` is longer than `requestTimeout` |
| deployments.full.requestTimeout | string | `"60s"` | Default request timeout for full instance |
| deployments.readOnly | object | `{"enable":false,"idleTimeout":"60s","replicas":1,"requestTimeout":"60s"}` | deployment config for readonly registry instances. You can also specify different `resources` config under this key. |
| deployments.readOnly.idleTimeout | string | `"60s"` | Default idle timeout for readonly instance. Make sure `idleTimeout` is longer than `requestTimeout` |
| deployments.readOnly.replicas | int | `1` | no. of replicates. Its value must no lower than `minReplicas` |
| deployments.readOnly.requestTimeout | string | `"60s"` | Default request timeout for readonly instance |
| global | object | `{}` |  |
| image.name | string | `"magda-registry-api"` |  |
| jvmMaxRamPercentage | float | `75` | JVM max allowed heap memory percentage based on `resources.limits.memory` |
| livenessProbe | object | `{}` |  |
| resources.limits.cpu | string | `"750m"` |  |
| resources.limits.memory | string | `"1Gi"` |  |
| resources.requests.cpu | string | `"250m"` |  |
| resources.requests.memory | string | `"500Mi"` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.13.1](https://github.com/norwoodj/helm-docs/releases/v1.13.1)
